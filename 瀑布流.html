<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
    .box {
        position: relative;
    }

    .box img {
        width: 100px;
        margin: 10px;
        position: absolute;
        transition: all .4s;
    }
</style>
</head>
<body>
    <div class="box">
        <img src="http://via.placeholder.com/100x190" alt="">
        <img src="http://via.placeholder.com/100x70" alt="">
        <img src="http://via.placeholder.com/100x100" alt="">
        <img src="http://via.placeholder.com/100x220" alt="">
        <img src="http://via.placeholder.com/100x90" alt="">
        <img src="http://via.placeholder.com/100x85" alt="">
        <img src="http://via.placeholder.com/100x120" alt="">
        <img src="http://via.placeholder.com/100x180" alt="">
        <img src="http://via.placeholder.com/100x105" alt="">
        <img src="http://via.placeholder.com/100x100" alt="">
        <img src="http://via.placeholder.com/100x95" alt="">
        <img src="http://via.placeholder.com/100x80" alt="">
        <img src="http://via.placeholder.com/100x200" alt="">
        <img src="http://via.placeholder.com/100x160" alt="">
        <img src="http://via.placeholder.com/100x77" alt="">
        <img src="http://via.placeholder.com/100x88" alt="">
        <img src="http://via.placeholder.com/100x136" alt="">
        <img src="http://via.placeholder.com/100x140" alt="">
        <img src="http://via.placeholder.com/100x170" alt="">
        <img src="http://via.placeholder.com/100x130" alt="">
        <img src="http://via.placeholder.com/100x130" alt="">
        <img src="http://via.placeholder.com/100x130" alt="">
        <img src="http://via.placeholder.com/100x130" alt="">
        <img src="http://via.placeholder.com/100x130" alt="">
    </div>
    <script>
        var colHeightArr = []
        var imgWidth = $('.box img').outerWidth(true)
        var column = Math.floor($('.box').width() / imgWidth)
        for (var i = 0; i < column; i++) {
            colHeightArr[i] = 0
        }
        $('.box img').on('load', function () {
            var minValue = colHeightArr[0]
            var minIndex = 0
            for (var i = 0; i < column; i++) {
                if (colHeightArr[i] < minValue) {
                    minValue = colHeightArr[i]
                    minIndex = i
                }
            }
            $(this).css({
                left: minIndex * imgWidth,
                top: minValue
            })
            colHeightArr[minIndex] += $(this).outerHeight(true)
        })

        $(window).resize(function(){
            var colHeightArr = []
            var imgWidth = $('.box img').outerWidth(true)
            var column = Math.floor($('.box').width() / imgWidth)
            for (var i = 0; i < column; i++) {
                colHeightArr[i] = 0
            }
            $('.box img').each(function () {
                var minValue = colHeightArr[0]
                var minIndex = 0
                for (var i = 0; i < column; i++) {
                    if (colHeightArr[i] < minValue) {
                        minValue = colHeightArr[i]
                        minIndex = i
                    }
                }
                $(this).css({
                    left: minIndex * imgWidth,
                    top: minValue
                })
                colHeightArr[minIndex] += $(this).outerHeight(true)
            })
        })
    </script>
</body>
</html>